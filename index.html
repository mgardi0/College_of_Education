<!DOCTYPE html>
<html lang="ckb" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پێشبڕکێی کۆلێژی پەروەردە</title>
    
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rudaw&display=swap');
        body { font-family: 'Rudaw', sans-serif; background: #f0f2f5; text-align: center; padding: 20px; direction: rtl; }
        .container { max-width: 500px; margin: 0 auto; background: white; padding: 20px; border-radius: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .logo { width: 80px; margin-bottom: 10px; }
        .screen { display: none; }
        .screen.active { display: block; }
        input, select, button { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #ddd; font-family: inherit; font-size: 16px; }
        button { background: #007bff; color: white; border: none; cursor: pointer; font-weight: bold; }
        button:hover { background: #0056b3; }
        .options { display: flex; gap: 10px; }
        .ans-btn { flex: 1; padding: 15px; font-size: 18px; }
        .correct { background: #28a745; }
        .wrong { background: #dc3545; }
        
        /* دیزاینی چوارگۆشەی دۆخی ناردن */
        #status-box { margin-top: 20px; padding: 15px; border-radius: 8px; font-weight: bold; display: none; }
    </style>
</head>
<body>

<div class="container">
    <img src="logo.png" alt="Logo" class="logo">

    <div id="screen-welcome" class="screen active">
        <h2>بەخێربێن بۆ پێشبڕکێ</h2>
        <input type="text" id="username" placeholder="ناوی سیانی" required>
        <select id="department">
            <option value="Biology">بایۆلۆجی</option>
            <option value="Chemistry">کیمیا</option>
            <option value="Physics">فیزیا</option>
            <option value="Mathematics">ماتماتیک</option>
            <option value="Kurdish">کوردی</option>
            <option value="English">ئینگلیزی</option>
            <option value="Arabic">عەرەبی</option>
        </select>
        <button onclick="startQuiz()">دەستپێکردن</button>
    </div>

    <div id="screen-quiz" class="screen">
        <h3 id="q-text">پرسیار...</h3>
        <p>پرسیاری <span id="q-num">1</span> لە 10</p>
        <div class="options">
            <button class="ans-btn correct" onclick="answer(true)">ڕاست</button>
            <button class="ans-btn wrong" onclick="answer(false)">هەڵە</button>
        </div>
    </div>

    <div id="screen-result" class="screen">
        <h2>تەواو بوو!</h2>
        <h1>نمرەکەت: <span id="score">0</span></h1>
        
        <div id="status-box">⏳ خەریکە نمرەکەت دەنێردرێت...</div>
        <p id="error-msg" style="color:red; font-size:12px;"></p>
        
        <button onclick="location.reload()" style="margin-top:20px; background:#6c757d;">دووبارەکردنەوە</button>
    </div>
</div>

<script>
    // ------------------------------------------------
    // ١. ڕێکخستنی فایەربەیس (هەمان کۆدی تێستەکە)
    // ------------------------------------------------
    const firebaseConfig = {
        apiKey: "AIzaSyBhv5zKnpk4DV1w_s9y2vbrv17Fmdyw1qs",
        authDomain: "college-of-education-f5c3e.firebaseapp.com",
        projectId: "college-of-education-f5c3e",
        storageBucket: "college-of-education-f5c3e.firebasestorage.app",
        messagingSenderId: "1014558650015",
        appId: "1:1014558650015:web:82a40961bfd5f750f4bcaa",
        measurementId: "G-1WJM3VEJQH"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // ------------------------------------------------
    // ٢. پرسیارەکان
    // ------------------------------------------------
    const questions = [
        { t: "ڤایرۆسەکان وەک زیندەوەرێکی تەواو پۆلێن دەکرێن چونکە دەتوانن بەبێ خانەی خانەخوێ گەشە بکەن.", a: false },
        { t: "گرافیت ڕەقترین ماددەیە لە سروشتدا.", a: false },
        { t: "دەنگ لە بۆشاییدا (Space) خێراتر دەڕوات وەک لە ئاو.", a: false },
        { t: "هەر ژمارەیەک توانەکەی ببێتە سفر، ئەنجامەکەی یەکسانە بە یەک (جگە لە سفر).", a: true }, // تێبینی: پرسیارەکەم راست کردەوە
        { t: "سکینەر خاوەنی بیردۆزی مەرجداربوونی کلاسیکییە.", a: false },
        { t: "ئۆتیزم بە دەرمان بە تەواوی بنبڕ دەکرێت.", a: false },
        { t: "Information is a countable noun.", a: false },
        { t: "کاتێک (لم) دەچێتە سەر کرداری داهاتوو، نیشانەکەی دەبێتە سوکون.", a: true },
        { t: "هێمن موکریانی خاوەنی مەم و زینە.", a: false },
        { t: "پیتی ئالەف لە سریانی تەنها لە کۆتایی دێت.", a: false }
    ];

    let qIdx = 0;
    let myScore = 0;
    let user = {};

    function startQuiz() {
        const nameInput = document.getElementById('username').value;
        if(!nameInput) { alert("تکایە ناوەکەت بنووسە"); return; }
        
        user.name = nameInput;
        user.dept = document.getElementById('department').value;
        
        document.getElementById('screen-welcome').classList.remove('active');
        document.getElementById('screen-quiz').classList.add('active');
        showQ();
    }

    function showQ() {
        if(qIdx >= questions.length) { endQuiz(); return; }
        document.getElementById('q-text').innerText = questions[qIdx].t;
        document.getElementById('q-num').innerText = qIdx + 1;
    }

    function answer(choice) {
        if(choice === questions[qIdx].a) { myScore++; }
        qIdx++;
        showQ();
    }

    function endQuiz() {
        document.getElementById('screen-quiz').classList.remove('active');
        document.getElementById('screen-result').classList.add('active');
        document.getElementById('score').innerText = myScore;
        
        // ناردنی داتا (بە شێوازی تێستەکە)
        const box = document.getElementById('status-box');
        box.style.display = 'block';
        box.style.background = 'yellow';
        box.style.color = 'black';
        box.innerText = "⏳ چاوەڕێ بە، خەریکە دەنێردرێت...";

        db.collection("results").add({
            name: user.name,
            department: user.dept,
            score: myScore,
            timestamp: new Date().toString() // کاتی بەستنەوەی سادە
        })
        .then(() => {
            box.style.background = '#90EE90'; // سەوز
            box.innerText = "✅ سەرکەوتوو بوو! گەیشتە داتابەیس.";
        })
        .catch((error) => {
            box.style.background = '#FFB6C1'; // سور
            box.innerText = "❌ نەگەیشت!";
            document.getElementById('error-msg').innerText = error.message;
        });
    }
</script>

</body>
</html>
